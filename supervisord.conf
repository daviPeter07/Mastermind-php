; supervisord.conf

[supervisord]
nodaemon=true

# Processo 1: O Servidor da API
[program:api-server]
command=php -S 0.0.0.0:8000 -t public
autostart=true
autorestart=true
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
environment=API_BASE_URL="http://localhost:8000"

# Processo 2: O Ouvinte do Bot do Telegram
[program:telegram-bot]
command=php scripts/run-bot.php
autostart=true
autorestart=true
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
environment=API_BASE_URL="http://app:8000"